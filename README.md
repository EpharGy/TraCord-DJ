# TraCord DJ

A comprehensive Discord bot for managing music requests, interacting with Traktor DJ software collections, and enhancing DJ workflow automation. This is a standalone GUI application suitable for personal DJ environments. Spout integration is included for cover art display in other supported applications.

> **ğŸ“ Version **: Current version in [`version.py`](version.py)

## Features

- **ğŸ–¥ï¸ Standalone GUI Application**: Tkinter-based control panel with real-time monitoring
- **ğŸµ Dynamic Song Search**: Intelligent search with interactive selection
- **ğŸ“‹ Song Request Management**: Full CRUD operations with user permissions
- **ğŸ“‚ Collection Management**: Automatic Traktor integration and collection refresh
- **ğŸ†• New Song Tracking**: Display recently imported songs
- **ğŸ“¢ Live Streaming Notifications**: Broadcast notifications with role mentions
- **ğŸ”’ Permission System**: Granular access control for different user roles
- **ğŸ§¹ Admin Controls**: Collection refresh and track history via GUI buttons
- **ğŸ“Š Search Analytics**: Track and display search statistics
- **ğŸ§ Now Playing Song**: Traktor Broadcast Listening for Song/Artist details, integrated with collection details for advanced meta data (coverart, BPM, Key)

## Screenshots
![TraCord DJ GUI](https://raw.githubusercontent.com/EpharGy/TraCord-DJ/assets/gui_screenshot.png)

## Quick Start
## Commands

### Music Discovery
- `/song <search>` - Search for songs with interactive selection (restricted to designated channels)
- `/srbnew [days]` - Display newly added songs from the last N days (default: 7)

### Request Management
- `/srbreqlist` - Display all pending song requests
- `/srbreqdel <number|'all'|'self'|username>` - Delete song requests with flexible options

### Utility Commands
- `/srblive <message>` - Send live streaming notifications with role mentions (admin only)

## Configuration

### Environment Variables
- Update environment variables in the `.env` file, run application before use to generate one or copy from `.env.example` (non EXE) 

### ğŸ› ï¸ For Developers

**Branches available:**
- `main` - Stable releases only
- `dev` - Active development (use this for contributions)

**Quick start:**
```bash
python gui.py  # Run the GUI application
```

## Running the Bot

### ğŸš€ GUI Application (Recommended)
- **Windows**: Double-click `start_bot.bat` or run the built executable
- **Cross-platform**: Run `python gui.py`

The GUI provides real-time monitoring, admin controls, and automatic bot startup.

## ğŸ§© Extending with Discord Cogs (Plugins)

This bot uses a dynamic cog loader! To add new discord features or commands, simply drop a `.py` file into the `cogs/` folder (if using EXE, create one where the exe is launched from). The bot will automatically load all cogs in this folder at startupâ€”no need to edit the main code!

- **To add a new cog:**
  1. Place your `my_cool_feature.py` in the `cogs/` folder.
  2. Restart the bot. That's it! Your cog will be loaded automatically.
- **To remove a cog:**
  1. Delete or move the `.py` file from `cogs/`.
  2. Restart the bot.

> **Note for Contributors:** The `_internal_cogs.py` file is auto-managed and contains an always-up-to-date list of internal cogs. Do not edit this file manually.

## Project Structure

The bot uses a modular Discord.py Cogs architecture for better organization:

```
TraCord-DJ/
â”œâ”€â”€ ğŸš€ Entry Points
â”‚   â”œâ”€â”€ debug_gui.py                # Debug GUI for development (optional)
â”‚   â”œâ”€â”€ gui.py                      # Main GUI application (recommended)
â”‚   â”œâ”€â”€ main.py                     # Command-line entry point (dynamic cog loader)
â”‚   â”œâ”€â”€ run_bot.py                  # Cross-platform launcher
â”‚   â””â”€â”€ start_bot.bat               # Windows batch launcher
â”œâ”€â”€ ğŸ“ Core Application
â”‚   â”œâ”€â”€ cogs/                       # All bot features as plugins (just drop in .py files!)
â”‚   â”‚   â”œâ”€â”€ admin.py
â”‚   â”‚   â”œâ”€â”€ collection.py
â”‚   â”‚   â”œâ”€â”€ music.py
â”‚   â”‚   â”œâ”€â”€ music_requests.py
â”‚   â”‚   â””â”€â”€ _internal_cogs.py      # Auto-managed: always-up-to-date list of internal cogs
â”‚   â”œâ”€â”€ extra_cogs/                # (gitignored) Personal/dev-only cogs, launchers, and 
â”‚   â”‚   â””â”€â”€ ...                    # Any .py files here are loaded as cogs in dev, but not in packaged EXE
â”‚   â”œâ”€â”€ config/
|   |   â”œâ”€â”€ collection.json
|   |   â”œâ”€â”€ song_requests.json
|   |   â”œâ”€â”€ stats.json              # Search and usage statistics (auto-created)
â”‚   â”‚   â””â”€â”€ settings.py
â”‚   â”œâ”€â”€ gui/                        # GUI submodules (panels, controls, etc.)
â”‚   â”‚   â”œâ”€â”€ gui_controls_stats.py
â”‚   â”‚   â”œâ”€â”€ gui_logconsole.py
â”‚   â”‚   â”œâ”€â”€ gui_now_playing.py
â”‚   â”‚   â”œâ”€â”€ gui_songrequests.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ discord_bot.py          # Discord bot lifecycle/controller logic
â”‚   â”‚   â””â”€â”€ traktor_listener.py     # Traktor Broadcast listener for Now Playing songs
â”‚   â”œâ”€â”€ utils/
|   â”‚   |â”€â”€ coverart.py             # Cover art extraction and caching
â”‚   â”‚   â”œâ”€â”€ events.py               # Event handling and custom events
â”‚   â”‚   â”œâ”€â”€ harmonic_keys.py        # Harmonic key detection and management
â”‚   â”‚   â”œâ”€â”€ helpers.py              # Utility functions and permission checks
â”‚   â”‚   â”œâ”€â”€ logger.py               # Logging setup and output capture
â”‚   â”‚   â”œâ”€â”€ song_matcher.py         # Song matching and search utilities
â”‚   â”‚   â”œâ”€â”€ song_request_highlight.py # Highlighting song requests
â”‚   â”‚   â”œâ”€â”€ stats.py                # Search and usage statistics management
â”‚   â”‚   â””â”€â”€ traktor.py              # Traktor collection parsing and management
â”‚   â””â”€â”€ version.py                  # Version information
â”œâ”€â”€ ğŸ¨ Assets
â”‚   â”œâ”€â”€ assets/
|   |   â”œâ”€â”€ screenshots/
|   |   |   â””â”€â”€ gui_screenshot.png
â”‚   â”‚   â”œâ”€â”€ app_icon.png
â”‚   â”‚   â””â”€â”€ app_icon.ico
â”œâ”€â”€ ğŸ”§ Development
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ ğŸ“– Documentation
â”‚   â”œâ”€â”€ LICENSE
â”‚   â”œâ”€â”€ README.md
â”‚   â””â”€â”€ RELEASE.md
â”œâ”€â”€ âš™ï¸ Configuration
â”‚   â”œâ”€â”€ .gitignore
â”‚   â””â”€â”€ TraCord DJ.code-workspace
â””â”€â”€ ğŸ“ Generated Files (git-ignored)
    â””â”€â”€ *.spec
```

> **Note:** The `gui/` folder contains all modular GUI panels and controls. The `services/` folder contains bot lifecycle logic. The `utils/` folder contains helpers, logging, and Traktor, Now Playing utilities.

## âš™ï¸ Cog Loading Behavior

- All cogs in `cogs/` are always loaded and should be included in packaged builds.
- Any `.py` files in `extra_cogs/` (top-level only) are also loaded as cogs when running from source, but are **not** included in the EXE unless you add `--add-data=extra_cogs;extra_cogs` to your build.
- Errors for missing cogs in `extra_cogs` are suppressed for a clean dev experience.
- Use `extra_cogs/` for personal, experimental, or private cogs and files. This folder is gitignored by default.

## ğŸ–¼ï¸ Spout Cover Art Integration (Optional)

This app supports sending cover art to other applications via Spout (Windows only) using [Python-SpoutGL](https://github.com/jlai/Python-SpoutGL).

- **Spout is optional**: The rest of the app works even if you do not install SpoutGL.
- If you click the Spout button in the GUI without SpoutGL installed, you will see a warning message.

### To enable Spout support:
1. Install dependencies:
   ```bash
   pip install PyOpenGL glfw
   ```
2. Clone and install Python-SpoutGL:
   ```bash
   git clone https://github.com/jlai/Python-SpoutGL.git
   cd Python-SpoutGL
   pip install .
   ```

**Do not include the Python-SpoutGL source in your own repo.** Just document these steps for users who want Spout support.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request
